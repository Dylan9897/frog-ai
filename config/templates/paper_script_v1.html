<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ScholarSync | Intelligent Research Platform</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <style>
        /* --- 1. Modern Clean Design System --- */
        :root {
            /* Palette: Slate (Cool Grey) for professional feel */
            --bg-body: #f3f4f6;       /* 柔和的浅灰背景，不刺眼 */
            --bg-card: #ffffff;       /* 纯白卡片 */
            --bg-sidebar: #ffffff;

            /* Text Colors - High Readability */
            --text-primary: #111827;  /* 近黑，用于标题 */
            --text-secondary: #4b5563;/* 深灰，用于正文 */
            --text-muted: #9ca3af;    /* 浅灰，用于辅助信息 */

            /* Brand Colors */
            --primary: #2563eb;       /* Royal Blue - 专业、信任 */
            --primary-light: #eff6ff;
            --primary-hover: #1d4ed8;

            /* Borders & Shadows */
            --border-color: #e5e7eb;
            --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
            --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);

            /* Status Colors */
            --green-bg: #dcfce7; --green-text: #166534;
            --blue-bg: #dbeafe;  --blue-text: #1e40af;
            --gray-bg: #f3f4f6;  --gray-text: #374151;
        }

        /* --- 2. Global Reset --- */
        * { box-sizing: border-box; margin: 0; padding: 0; outline: none; }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg-body);
            color: var(--text-primary);
            height: 100vh;
            display: flex;
            overflow: hidden;
            font-size: 14px;
            -webkit-font-smoothing: antialiased; /* 让字体看起来更细致 */
        }

        /* --- 3. Sidebar (Clean & Airy) --- */
        .sidebar {
            width: 250px;
            background: var(--bg-sidebar);
            border-right: 1px solid var(--border-color);
            display: flex;
            flex-direction: column;
            padding: 24px;
            z-index: 10;
        }

        .brand {
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 18px;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 40px;
            letter-spacing: -0.5px;
        }
        .brand-logo {
            width: 32px; height: 32px;
            background: var(--primary);
            color: white;
            border-radius: 8px;
            display: flex; align-items: center; justify-content: center;
            font-size: 16px;
        }

        .nav-menu { list-style: none; display: flex; flex-direction: column; gap: 4px; }
        .nav-item {
            padding: 10px 12px;
            border-radius: 6px;
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.2s;
            font-weight: 500;
            display: flex; align-items: center; gap: 12px;
        }
        .nav-item:hover { background-color: var(--bg-body); color: var(--text-primary); }
        .nav-item.active {
            background-color: var(--primary-light);
            color: var(--primary);
        }
        .nav-item i { width: 20px; text-align: center; font-size: 14px; }

        /* --- 4. Main Content Area --- */
        .main-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        /* Header */
        .top-bar {
            height: 64px;
            background: var(--bg-card);
            border-bottom: 1px solid var(--border-color);
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 32px;
        }
        .page-title { font-size: 16px; font-weight: 600; color: var(--text-primary); }
        .user-actions { display: flex; align-items: center; gap: 16px; }
        .btn-icon { border: none; background: none; color: var(--text-muted); cursor: pointer; font-size: 16px; }

        /* Content Scroll Area */
        .content-scroll {
            flex: 1;
            padding: 32px;
            overflow-y: auto;
        }

        /* --- 5. Components: Cards & Tables --- */

        /* View Container */
        .view-section { display: none; }
        .view-section.active { display: block; animation: fadeUp 0.3s ease-out; }
        @keyframes fadeUp { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* Card */
        .card {
            background: var(--bg-card);
            border-radius: 12px;
            box-shadow: var(--shadow-sm);
            border: 1px solid var(--border-color);
            overflow: hidden;
            margin-bottom: 24px;
        }

        /* Header inside page */
        .section-header {
            display: flex; justify-content: space-between; align-items: center;
            margin-bottom: 24px;
        }
        .header-text h1 { font-size: 24px; font-weight: 700; color: var(--text-primary); margin-bottom: 4px; letter-spacing: -0.5px; }
        .header-text p { color: var(--text-secondary); }

        /* Primary Button */
        .btn {
            display: inline-flex; align-items: center; gap: 8px;
            padding: 10px 20px; border-radius: 8px;
            font-size: 14px; font-weight: 500;
            border: 1px solid transparent; cursor: pointer;
            transition: all 0.2s; box-shadow: var(--shadow-sm);
        }
        .btn-primary { background: var(--primary); color: white; }
        .btn-primary:hover { background: var(--primary-hover); transform: translateY(-1px); box-shadow: var(--shadow-md); }
        .btn-secondary { background: white; border-color: var(--border-color); color: var(--text-secondary); }
        .btn-secondary:hover { background: var(--bg-body); border-color: #d1d5db; }

        /* Modern Table */
        .table-container { width: 100%; overflow-x: auto; }
        .table { width: 100%; border-collapse: collapse; }
        .table th {
            text-align: left; padding: 16px 24px;
            background: #f9fafb;
            color: var(--text-secondary);
            font-size: 12px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.05em;
            border-bottom: 1px solid var(--border-color);
        }
        .table td {
            padding: 16px 24px;
            border-bottom: 1px solid var(--border-color);
            color: var(--text-secondary);
        }
        .table tr:last-child td { border-bottom: none; }
        .table tbody tr { transition: background 0.15s; }
        .table tbody tr:hover { background: #f9fafb; }

        .clickable-row { cursor: pointer; }
        .clickable-row:hover td { color: var(--text-primary); }

        /* Status Badge (Pill) */
        .badge {
            display: inline-flex; align-items: center; gap: 6px;
            padding: 4px 10px; border-radius: 9999px;
            font-size: 12px; font-weight: 500;
        }
        .badge.completed { background: var(--green-bg); color: var(--green-text); }
        .badge.running { background: var(--blue-bg); color: var(--blue-text); }
        .badge.pending { background: var(--gray-bg); color: var(--gray-text); }

        /* Progress Bar */
        .progress-container { width: 120px; height: 6px; background: #e5e7eb; border-radius: 3px; overflow: hidden; }
        .progress-bar { height: 100%; background: var(--primary); border-radius: 3px; transition: width 0.4s ease; }

        /* --- 6. Form Design (Create Task) --- */
        .form-layout {
            display: grid; grid-template-columns: 2fr 1fr; gap: 32px;
        }
        .form-section { background: white; padding: 32px; border-radius: 12px; border: 1px solid var(--border-color); box-shadow: var(--shadow-sm); }

        .form-group { margin-bottom: 24px; }
        .form-label { display: block; font-size: 14px; font-weight: 500; color: var(--text-primary); margin-bottom: 8px; }
        .form-helper { font-size: 12px; color: var(--text-muted); margin-bottom: 8px; display: block; }

        .form-input, .form-select {
            width: 100%;
            padding: 10px 12px;
            font-size: 14px;
            border: 1px solid var(--border-color);
            border-radius: 6px;
            color: var(--text-primary);
            transition: 0.2s;
            background: #fff;
        }
        .form-input:focus, .form-select:focus {
            border-color: var(--primary);
            box-shadow: 0 0 0 3px var(--primary-light);
        }

        /* Selection Cards */
        .selection-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(140px, 1fr)); gap: 12px; }
        .selection-card {
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 16px;
            cursor: pointer;
            transition: 0.2s;
            text-align: center;
        }
        .selection-card:hover { border-color: var(--text-muted); background: #f9fafb; }
        .selection-card.selected {
            border-color: var(--primary);
            background: var(--primary-light);
            color: var(--primary);
            font-weight: 500;
            box-shadow: 0 0 0 1px var(--primary);
        }

        /* --- 7. Paper Detail View --- */
        .paper-item {
            padding: 20px; border-bottom: 1px solid var(--border-color);
            display: flex; justify-content: space-between; align-items: flex-start;
        }
        .paper-item:last-child { border-bottom: none; }
        .paper-info h3 { font-size: 16px; font-weight: 600; color: var(--primary); margin-bottom: 6px; line-height: 1.4; }
        .paper-meta { font-size: 13px; color: var(--text-secondary); display: flex; gap: 12px; align-items: center; }
        .tag { background: #f3f4f6; padding: 2px 8px; border-radius: 4px; font-size: 11px; font-weight: 500; color: var(--text-secondary); border: 1px solid #e5e7eb; }

    </style>
</head>
<body>

    <aside class="sidebar">
        <div class="brand">
            <div class="brand-logo"><i class="fas fa-shapes"></i></div>
            ScholarSync
        </div>
        <ul class="nav-menu">
            <li class="nav-item active" onclick="switchView('scheduler', this)">
                <i class="fas fa-list-check"></i> 任务调度 (Scheduler)
            </li>
            <li class="nav-item" onclick="switchView('create', this)">
                <i class="fas fa-plus-circle"></i> 新建任务
            </li>
            <li class="nav-item" onclick="alert('Feature coming soon')">
                <i class="fas fa-chart-bar"></i> 数据洞察
            </li>
            <li class="nav-item" onclick="alert('Settings')">
                <i class="fas fa-cog"></i> 设置
            </li>
        </ul>

        <div style="margin-top: auto; padding-top: 20px; border-top: 1px solid var(--border-color);">
            <div class="nav-item">
                <i class="fas fa-sign-out-alt"></i> 退出登录
            </div>
        </div>
    </aside>

    <main class="main-content">
        <header class="top-bar">
            <div class="page-title" id="page-title-display">Dashboard</div>
            <div class="user-actions">
                <button class="btn-icon"><i class="far fa-bell"></i></button>
                <div style="width: 32px; height: 32px; background: #e5e7eb; border-radius: 50%; display:flex; align-items:center; justify-content:center; font-size:12px; font-weight:600; color:#4b5563;">Lab</div>
            </div>
        </header>

        <div class="content-scroll">

            <div id="view-scheduler" class="view-section active">
                <div class="section-header">
                    <div class="header-text">
                        <h1>任务调度中心</h1>
                        <p>实时监控所有爬虫进程，点击已完成任务查看论文结果。</p>
                    </div>
                    <button class="btn btn-primary" onclick="switchView('create', document.querySelectorAll('.nav-item')[1])">
                        <i class="fas fa-plus"></i> 新建任务
                    </button>
                </div>

                <div class="card">
                    <div class="table-container">
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>任务 ID</th>
                                    <th>搜索关键词</th>
                                    <th>目标来源</th>
                                    <th>状态</th>
                                    <th>进度</th>
                                    <th>爬取数量</th>
                                    <th style="text-align: right;">操作</th>
                                </tr>
                            </thead>
                            <tbody id="task-table-body">
                                </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <div id="view-create" class="view-section">
                <div class="section-header">
                    <div class="header-text">
                        <h1>配置新爬虫任务</h1>
                        <p>请配置关键词、目标会议及过滤条件。</p>
                    </div>
                </div>

                <div class="form-layout">
                    <div class="form-section">
                        <div class="form-group">
                            <label class="form-label">核心关键词 (Keywords)</label>
                            <span class="form-helper">多个关键词请用逗号分隔，支持布尔逻辑。</span>
                            <input type="text" class="form-input" id="input-kw" placeholder="例如: Large Language Models, RAG, Prompt Engineering">
                        </div>

                        <div class="form-group">
                            <label class="form-label">目标会议/期刊 (Sources)</label>
                            <div class="selection-grid" id="source-grid">
                                <div class="selection-card selected" onclick="toggleSelection(this)">ACL</div>
                                <div class="selection-card" onclick="toggleSelection(this)">NeurIPS</div>
                                <div class="selection-card" onclick="toggleSelection(this)">ICML</div>
                                <div class="selection-card" onclick="toggleSelection(this)">CVPR</div>
                                <div class="selection-card" onclick="toggleSelection(this)">EMNLP</div>
                                <div class="selection-card" onclick="toggleSelection(this)">Nature MI</div>
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="form-label">年份范围</label>
                            <div style="display: flex; gap: 16px;">
                                <input type="number" class="form-input" value="2024">
                                <span style="align-self: center; color: var(--text-muted);">-</span>
                                <input type="number" class="form-input" value="2025">
                            </div>
                        </div>

                        <div style="margin-top: 40px; display: flex; gap: 12px;">
                            <button class="btn btn-primary" onclick="createTask()">立即启动任务</button>
                            <button class="btn btn-secondary" onclick="switchView('scheduler', document.querySelectorAll('.nav-item')[0])">取消</button>
                        </div>
                    </div>

                    <div class="form-section" style="height: fit-content;">
                        <div class="form-group">
                            <label class="form-label">文章类型</label>
                            <select class="form-select" id="input-type">
                                <option>Long Paper (Main Track)</option>
                                <option>Short Paper</option>
                                <option>Demo / Workshop</option>
                                <option>All Types</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">爬取深度</label>
                            <select class="form-select">
                                <option>Standard (Top 500)</option>
                                <option>Deep (All available)</option>
                                <option>Quick (Top 50)</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">输出格式</label>
                            <div style="display: flex; gap: 10px; margin-top: 8px;">
                                <label style="display: flex; gap: 6px; font-size: 13px; align-items: center;">
                                    <input type="checkbox" checked> CSV
                                </label>
                                <label style="display: flex; gap: 6px; font-size: 13px; align-items: center;">
                                    <input type="checkbox"> JSON
                                </label>
                                <label style="display: flex; gap: 6px; font-size: 13px; align-items: center;">
                                    <input type="checkbox"> PDF
                                </label>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="view-results" class="view-section">
                <div style="margin-bottom: 24px;">
                    <button class="btn btn-secondary" onclick="switchView('scheduler', document.querySelectorAll('.nav-item')[0])">
                        <i class="fas fa-arrow-left"></i> 返回列表
                    </button>
                </div>

                <div class="section-header">
                    <div class="header-text">
                        <h1 id="result-title">Task Results</h1>
                        <p id="result-meta">Metadata extracted from 124 papers</p>
                    </div>
                    <div style="display: flex; gap: 12px;">
                        <button class="btn btn-secondary"><i class="fas fa-download"></i> 导出 CSV</button>
                        <button class="btn btn-primary"><i class="fas fa-file-pdf"></i> 生成报告</button>
                    </div>
                </div>

                <div class="card">
                    <div id="paper-list-container">
                        </div>
                </div>
            </div>

        </div>
    </main>

    <script>
        // --- Data ---
        const tasks = [
            { id: 'JOB-2025-A01', kw: 'Reinforcement Learning, RLHF', src: 'NeurIPS', status: 'completed', progress: 100, count: 342, date: 'Today' },
            { id: 'JOB-2025-A02', kw: 'Diffusion Models', src: 'CVPR, ICCV', status: 'running', progress: 65, count: 0, date: 'Today' },
            { id: 'JOB-2025-B04', kw: 'Generative Agents', src: 'ACL', status: 'pending', progress: 0, count: 0, date: 'Yesterday' },
        ];

        const papersMock = [
            { title: "Training Language Models to Follow Instructions with Human Feedback", authors: "Ouyang et al.", year: "2024", conf: "NeurIPS", track: "Oral" },
            { title: "Constitutional AI: Harmlessness from AI Feedback", authors: "Anthropic Research", year: "2024", conf: "NeurIPS", track: "Main" },
            { title: "High-Resolution Image Synthesis with Latent Diffusion Models", authors: "Rombach et al.", year: "2023", conf: "CVPR", track: "Highlight" },
            { title: "LoRA: Low-Rank Adaptation of Large Language Models", authors: "Hu et al.", year: "2024", conf: "ICLR", track: "Main" },
            { title: "An Image is Worth 16x16 Words: Transformers for Image Recognition at Scale", authors: "Dosovitskiy et al.", year: "2023", conf: "ICLR", track: "Main" },
        ];

        // --- Logic ---

        function init() {
            renderScheduler();
        }

        function switchView(viewId, navEl) {
            // Nav styling
            document.querySelectorAll('.nav-item').forEach(el => el.classList.remove('active'));
            if(navEl) navEl.classList.add('active');

            // View switching
            document.querySelectorAll('.view-section').forEach(el => el.classList.remove('active'));
            document.getElementById(`view-${viewId}`).classList.add('active');

            // Title update
            const titles = { 'scheduler': 'Dashboard', 'create': 'New Task', 'results': 'Results Explorer' };
            document.getElementById('page-title-display').innerText = titles[viewId];
        }

        function toggleSelection(el) {
            el.classList.toggle('selected');
        }

        function renderScheduler() {
            const tbody = document.getElementById('task-table-body');
            tbody.innerHTML = '';

            tasks.forEach(t => {
                const tr = document.createElement('tr');
                tr.className = t.status === 'completed' ? 'clickable-row' : '';
                if(t.status === 'completed') {
                    tr.onclick = (e) => {
                        // Prevent click if button was clicked
                        if(e.target.tagName === 'BUTTON' || e.target.tagName === 'I') return;
                        showResults(t);
                    }
                }

                // Badges
                let badgeClass = t.status === 'completed' ? 'completed' : (t.status === 'running' ? 'running' : 'pending');
                let statusIcon = t.status === 'completed' ? '<i class="fas fa-check"></i>' : (t.status === 'running' ? '<i class="fas fa-sync fa-spin"></i>' : '<i class="far fa-clock"></i>');
                let statusLabel = t.status === 'completed' ? '已完成' : (t.status === 'running' ? '运行中' : '等待中');

                tr.innerHTML = `
                    <td style="font-family: monospace; color: var(--text-primary); font-weight: 500;">${t.id}</td>
                    <td style="font-weight: 500;">${t.kw}</td>
                    <td><span class="tag">${t.src}</span></td>
                    <td><span class="badge ${badgeClass}">${statusIcon} ${statusLabel}</span></td>
                    <td>
                        <div class="progress-container">
                            <div class="progress-bar" style="width: ${t.progress}%"></div>
                        </div>
                    </td>
                    <td>${t.status === 'completed' ? t.count + ' 篇' : '-'}</td>
                    <td style="text-align: right;">
                        <button class="btn-icon" title="Delete"><i class="far fa-trash-alt"></i></button>
                    </td>
                `;
                tbody.appendChild(tr);
            });
        }

        function createTask() {
            const btn = document.querySelector('#view-create .btn-primary');
            btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> 启动中...';

            setTimeout(() => {
                const kw = document.getElementById('input-kw').value || 'New Topic';
                // Add new task
                tasks.unshift({
                    id: `JOB-2025-N${Math.floor(Math.random()*100)}`,
                    kw: kw,
                    src: 'ACL',
                    status: 'running',
                    progress: 10,
                    count: 0,
                    date: 'Now'
                });
                renderScheduler();
                switchView('scheduler', document.querySelectorAll('.nav-item')[0]);
                btn.innerHTML = '立即启动任务';

                // Simulate progress
                setTimeout(() => { tasks[0].progress = 50; renderScheduler(); }, 1000);
            }, 800);
        }

        function showResults(task) {
            document.getElementById('result-title').innerText = `${task.kw} - 论文列表`;
            document.getElementById('result-meta').innerText = `来源: ${task.src} | 共检索到 ${Math.floor(Math.random() * 200) + 50} 篇相关结果`;

            const container = document.getElementById('paper-list-container');
            container.innerHTML = '';

            papersMock.forEach(p => {
                const item = document.createElement('div');
                item.className = 'paper-item';
                item.innerHTML = `
                    <div class="paper-info">
                        <h3>${p.title}</h3>
                        <div class="paper-meta">
                            <span><i class="far fa-user"></i> ${p.authors}</span>
                            <span class="tag">${p.conf} ${p.year}</span>
                            <span class="tag">${p.track}</span>
                        </div>
                    </div>
                    <div class="paper-actions">
                        <button class="btn btn-secondary" style="padding: 6px 12px; font-size: 12px;">
                            <i class="fas fa-file-pdf"></i> PDF
                        </button>
                    </div>
                `;
                container.appendChild(item);
            });

            switchView('results', null);
        }

        // Init
        init();

    </script>
</body>
</html>
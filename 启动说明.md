# 🐸 Frog AI 启动指南

## 快速开始

### 安装依赖

```bash
pip install -r requirements_asr.txt
```

### 启动服务

**一键启动所有服务**（推荐）：

```bash
python start_all.py
```

这将同时启动：
- **Flask 主服务**：`http://localhost:5000` - 天蛙轻语 Web 界面
- **FastAPI ASR 服务**：`ws://localhost:5001/ws` - 实时语音识别

### 单独启动（开发调试）

**只启动 Flask 主服务**（无语音识别功能）：

```bash
python src/main.py
```

**只启动 ASR 服务**（独立测试）：

```bash
cd src
python -m uvicorn asr.asr_server:app --host 0.0.0.0 --port 5001
```

## 使用说明

1. 启动完整服务后，访问 `http://localhost:5000/tianwa`
2. 按住空格键对着麦克风说话
3. 松开空格键，自动识别并发送给 AI
4. AI 回复会逐字显示并自动朗读

## 配置

在 `src/tianwa/config.py` 中配置 DashScope API Key：

```python
DASHSCOPE_API_KEY = "sk-your-api-key-here"
```

## 项目结构

```
frog-ai/
├── src/
│   ├── asr/              # ASR 语音识别模块
│   │   ├── asr_service.py    # ASR 核心服务
│   │   ├── asr_server.py     # FastAPI WebSocket 服务器
│   │   └── README.md         # ASR 详细文档
│   ├── tianwa/           # 天蛙轻语对话模块
│   │   ├── tianwa_service.py # LLM 对话服务
│   │   ├── config.py         # 配置文件（含 API Key）
│   │   └── templates/
│   │       └── tianwa_interface.html  # 前端界面
│   └── main.py           # Flask 主应用
├── start_all.py          # 一键启动所有服务
└── requirements_asr.txt  # 项目依赖
```

## 常见问题

**Q: 按住空格没有反应？**
- 确保 ASR 服务已启动（使用 `start_all.py`）
- 浏览器需要授予麦克风权限
- 按 F12 查看控制台日志

**Q: 提示缺少 API Key？**
- 编辑 `src/tianwa/config.py` 添加你的 DashScope API Key

**Q: 端口被占用？**
- Flask 默认 5000 端口
- ASR 服务默认 5001 端口
- 可以在对应文件中修改端口号

